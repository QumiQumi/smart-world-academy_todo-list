(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);f&&f(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=l(l.s=n[0]))}return t}var o={},i={app:0},r={app:0},a=[];function s(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-439a5590":"6c07a21c"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-439a5590":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-439a5590":"e34daeb8"}[t]+".css",r=l.p+o,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===r))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===o||d===r)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[t],f.parentNode.removeChild(f),n(a)},f.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){i[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,n){o=r[t]=[e,n]}));e.push(o[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",u.name="ChunkLoadError",u.type=o,u.request=i,n[1](u)}r[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var f=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1776:function(t,e,n){},"25da":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n(t.layout,{tag:"component"},[n("router-view")],1)],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container border-right border-left"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 p-0"},[n("Menu")],1),n("div",{staticClass:"col-8 p-0 d-flex flex-column main-content"},[n("router-view"),n("Footer")],1),n("ModalDelete")],1)])},s=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sticky-top d-flex flex-column align-items-center menu border-right"},[n("button",{staticClass:"btn dropdown-toggle mt-2",attrs:{id:"filter-lists",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.filterText))]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"filter-lists"}},t._l(t.filters,(function(e){return n("button",{key:e.filter,staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(n){return t.setFilter(e.filter)}}},[t._v(t._s(e.text))])})),0),n("div",{staticClass:"list-group list-group-flush mt-3 menu__list border-top"},t._l(this.$store.getters.getLists,(function(e){return n("router-link",{key:e.id,staticClass:"list-group-item list-group-item-action d-flex align-items-center border-bottom",style:{"background-color":t.linkColor(e.id)},attrs:{to:{name:"TodoList",params:{listId:e.id}},"active-class":"active-link"},nativeOn:{click:function(n){return t.setActiveList(e.id)}}},[t._v(t._s(e.title)),n("font-awesome-icon",{staticClass:"ml-auto menu__delete-icon",attrs:{icon:"trash","data-toggle":"modal","data-target":"#deleteModal"},on:{click:function(n){return t.sendListToModal(e)}}})],1)})),1),n("div",{staticClass:"menu__footer d-flex flex-column align-items-center mt-auto border-top w-100 p-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newList,expression:"newList"}],staticClass:"form-control m-1",attrs:{type:"text",placeholder:"Списочек"},domProps:{value:t.newList},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addList()},input:function(e){e.target.composing||(t.newList=e.target.value)}}}),n("button",{staticClass:"btn btn-primary m-1 w-100",attrs:{type:"button"},on:{click:function(e){return t.addList()}}},[t._v("Добавить список")])])])},c=[],d=(n("4de4"),n("96cf"),n("1da1")),u=[{filter:"SHOW_ALL",text:"Все"},{filter:"SHOW_COMPLETED",text:"Исполненные"},{filter:"SHOW_ACTIVE",text:"Неисполненные"}],f=u,m=(n("4160"),n("a434"),n("159b"),n("2591")),p=(n("e71f"),{apiKey:"AIzaSyCgem2fjbMaGUELojMoAx-DkOCfUohxlsM",authDomain:"smart-world-academy-todo-list.firebaseapp.com",databaseURL:"https://smart-world-academy-todo-list.firebaseio.com",projectId:"smart-world-academy-todo-list",storageBucket:"smart-world-academy-todo-list.appspot.com",messagingSenderId:"310733091898",appId:"1:310733091898:web:a7a3b541961ae267b63103",measurementId:"G-3HG4RE91DY"}),v=m["a"].initializeApp(p).firestore(),h={getLists:function(){var t=[];return v.collection("Lists").orderBy("title").get().then((function(e){console.log(e),e.forEach((function(e){t.push({id:e.id,title:e.data().title})}))})),console.log(t),t},deleteList:function(t){t?v.collection("Lists").doc(t).delete().then((function(){console.log("List successfully deleted")})).catch((function(t){this.error=t})):this.error="Invalid ID"},addList:function(t){v.collection("Lists").add({title:t,isCompleted:!1,todos:[]}).catch((function(t){this.error=t}))},addTodo:function(t,e,n){var o=v.collection("Lists").doc(t);o.update({todos:m["a"].firestore.FieldValue.arrayUnion({title:e,isImmediate:n,isDone:!1,date:m["a"].firestore.Timestamp.fromDate(new Date)})})},deleteTodo:function(t,e){var n=[];v.collection("Lists").doc(t).get().then((function(o){n=o.data().todos,n.splice(e,1),v.collection("Lists").doc(t).update({todos:n})}))},toggleTodo:function(t,e){var n=[];v.collection("Lists").doc(t).get().then((function(o){n=o.data().todos,n[e].isDone=!n[e].isDone,v.collection("Lists").doc(t).update({todos:n})}))}},g={name:"Menu",data:function(){return{newList:null,filters:f,colors:{white:"#ffffff",green:"rgb(232, 255, 209)",gray:"rgb(248, 248, 248)"}}},computed:{filterText:function(){switch(this.$store.state.filter){case"SHOW_ALL":return"Все";case"SHOW_ACTIVE":return"Неисполненные";case"SHOW_COMPLETED":return"Исполненные";default:return"Че это за фильтр"}}},methods:{sendListToModal:function(t){this.$store.dispatch("setItemToDelete",t)},setFilter:function(t){this.$store.dispatch("setFilter",t)},setActiveList:function(t){this.$store.dispatch("setActiveList",t)},addList:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.newList,t.newList="",!n){e.next=5;break}return e.next=5,h.addList(n);case 5:case"end":return e.stop()}}),e)})))()},linkColor:function(t){var e=this.$store.getters.getList(t);return 0===e.todos.length?this.colors.white:e.todos.filter((function(t){return t.isDone})).length===e.todos.length?this.colors.gray:this.colors.green}}},b=g,y=(n("b531"),n("2877")),w=Object(y["a"])(b,l,c,!1,null,null,null),L=w.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer mt-auto border-top d-flex flex-wrap align-items-center justify-content-between p-2"},[n("div",{staticClass:"footer__input m-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodo,expression:"newTodo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Сходить в магаз"},domProps:{value:t.newTodo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTodo()},input:function(e){e.target.composing||(t.newTodo=e.target.value)}}})]),n("div",{staticClass:"d-flex flex-nowrap align-items-center input-group-text mr-auto border border-warning m-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isImmediate,expression:"isImmediate"}],attrs:{id:"is-immediate",type:"checkbox","aria-label":"Checkbox for following text input"},domProps:{checked:Array.isArray(t.isImmediate)?t._i(t.isImmediate,null)>-1:t.isImmediate},on:{change:function(e){var n=t.isImmediate,o=e.target,i=!!o.checked;if(Array.isArray(n)){var r=null,a=t._i(n,r);o.checked?a<0&&(t.isImmediate=n.concat([r])):a>-1&&(t.isImmediate=n.slice(0,a).concat(n.slice(a+1)))}else t.isImmediate=i}}}),n("label",{staticClass:"m-0 ml-1",attrs:{for:"is-immediate"}},[t._v("Срочное")])]),n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button"},on:{click:function(e){return t.addTodo()}}},[t._v("Добавить дело")])])},T=[],C={name:"Footer",data:function(){return{newTodo:"",isImmediate:!1}},methods:{addTodo:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.newTodo||!t.$store.state.activeList){e.next=7;break}return n=t.newTodo,o=t.isImmediate,t.isImmediate=!1,t.newTodo="",e.next=7,t.$store.dispatch("addTodo",{title:n,isImmediate:o});case 7:case"end":return e.stop()}}),e)})))()}}},x=C,k=(n("7433"),Object(y["a"])(x,_,T,!1,null,null,null)),O=k.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteModalTitle","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[t._m(0),n("div",{staticClass:"modal-body"},[t.$store.state.itemToDelete.isTodo?n("span",[t._v("Вы действительно хотите удалить задачу ")]):n("span",[t._v("Вы действительно хотите удалить список ")]),n("em",[t._v('"'+t._s(t.$store.state.itemToDelete.title)+'"')]),t._v("?")]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Отменить")]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.onConfirm()}}},[t._v("Удалить")])])])])])},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"deleteModalTitle"}},[t._v("Удаление элемента")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],D=n("1157"),A={name:"deleteModal",methods:{onConfirm:function(){var t=this.$store.state.itemToDelete,e=this.$store.state.activeList;t.isTodo?h.deleteTodo(e.id,t.index):h.deleteList(e.id),D("#deleteModal").modal("hide")}}},j=A,M=Object(y["a"])(j,E,I,!1,null,null,null),S=M.exports,$={name:"main-layout",components:{Menu:L,ModalDelete:S,Footer:O}},P=$,H=(n("89d3"),Object(y["a"])(P,a,s,!1,null,null,null)),F=H.exports,W={name:"app",data:function(){return{newTodo:"",newList:""}},methods:{},computed:{layout:function(){return(this.$route.meta.layout||"main")+"-layout"}},components:{MainLayout:F},beforeCreate:function(){this.$store.dispatch("setLists")}},N=W,B=(n("034f"),n("5c64"),Object(y["a"])(N,i,r,!1,null,null,null)),R=B.exports,U=(n("d3b7"),n("8c4f")),V=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex align-items-center justify-content-center h-100"},[n("h1",[t._v("Кликай на лист и вперед!")])])}],q={path:"/",name:"Home"},z=q,J=Object(y["a"])(z,V,G,!1,null,null,null),K=J.exports;o["a"].use(U["a"]);var Y=[{path:"/",name:"Home",component:K,meta:{layout:"main"}},{path:"/todolist/:listId",name:"TodoList",component:function(){return n.e("chunk-439a5590").then(n.bind(null,"140d"))},meta:{layout:"main"}}],Q=new U["a"]({mode:"history",base:"/",routes:Y}),X=Q,Z=(n("7db0"),n("2f62"));o["a"].use(Z["a"]);var tt=new Z["a"].Store({state:{lists:null,activeList:null,itemToDelete:{},filter:"SHOW_ACTIVE"},getters:{getLists:function(t){var e=t.lists,n=t.filter;if(e)switch(n){case"SHOW_ALL":return e;case"SHOW_COMPLETED":return e.filter((function(t){return t.isCompleted}));case"SHOW_ACTIVE":return e.filter((function(t){return!t.isCompleted}));default:throw new Error("Unknown filter: "+n)}},getList:function(t){var e=t.lists;return function(t){if(e&&t)return e.find((function(e){return e.id===t}))}},getFilter:function(t){var e=t.filter;return e},getTodoByIndex:function(t){return function(e){return t.activeList.todos[e]}}},actions:{setLists:function(t){var e=t.commit;e("setLists")},setFilter:function(t,e){var n=t.commit;n("setFilter",e)},setActiveList:function(t,e){var n=t.commit;n("setActiveList",e)},setItemToDelete:function(t,e){t.commit("setItemToDelete",e)},addTodo:function(t,e){t.commit("addTodo",e)},toggleTodo:function(t,e){t.commit("toggleTodo",e)}},mutations:{setLists:function(t){var e=[];v.collection("Lists").orderBy("title").onSnapshot((function(n){e=[],n.forEach((function(n){var o=!1;0!=n.data().todos.length&&(o=n.data().todos.length==n.data().todos.filter((function(t){return t.isDone})).length);var i={id:n.id,title:n.data().title,isCompleted:o,todos:n.data().todos};e.push(i),t.activeList&&n.id===t.activeList.id&&(t.activeList=i)})),t.lists=e}))},setActiveList:function(t,e){t.lists&&(t.activeList=t.lists.find((function(t){return t.id===e})))},setFilter:function(t,e){t.filter=e},setItemToDelete:function(t,e){t.itemToDelete=e},addTodo:function(t,e){h.addTodo(t.activeList.id,e.title,e.isImmediate)},toggleTodo:function(t,e){h.toggleTodo(t.activeList.id,e)}}}),et=n("0ff2"),nt=(n("0deb"),n("ecee")),ot=n("c074"),it=n("ad3d");nt["c"].add(ot["b"],ot["a"]),o["a"].component("font-awesome-icon",it["a"]),o["a"].use(et["a"]),o["a"].config.productionTip=!1,new o["a"]({router:X,store:tt,render:function(t){return t(R)}}).$mount("#app")},"5c64":function(t,e,n){"use strict";n("d32a")},7433:function(t,e,n){"use strict";n("25da")},"85ec":function(t,e,n){},"89d3":function(t,e,n){"use strict";n("1776")},b531:function(t,e,n){"use strict";n("f0a9")},d32a:function(t,e,n){},f0a9:function(t,e,n){}});
//# sourceMappingURL=app.c2a29533.js.map